<div data-ng-include src="'views/header-lg.html'"></div>
<div data-ng-include src="'views/header-xs.html'"></div>

<div class="row form-group visible-xs" style="height: 50px;">
  <div class="col-lg-12">
    &nbsp;
  </div>
</div>
<div class="row form-group hidden-xs" style="height: 150px;">
  <div class="col-lg-12">
    &nbsp;
  </div>
</div>
<div class="row" style=" padding: 8px; padding-top:20px;" ng-form="frm">
	<div class="col-md-12">
		<div class="page-header text-center">
			<span style="font-size: 1.3em; font-weight: bolder;">บริการฝากสั่งสินค้า</span>
		</div>
		<div class="row form-group">
			<div class="col-md-8 col-md-offset-2 col-sm-6 col-sm-offset-3">
				<div class="row">
					<label class="col-md-2 col-sm-4 col-xs-12">หมายเลข Order</label>
					<div class="col-md-4 col-sm-6 col-xs-10">
						<input class="form-control" data-ng-model="condition.order_no">
					</div>
					<label class="col-md-1">
						สถานะ
					</label>
					<div class="col-md-3">
						<select class="form-control" data-ng-model="condition.order_status" data-ng-options="data.id as data.value for data in ORDER_STATUS">
							<option value="">ทั้งหมด</option>
						</select>
					</div>
					<div class="col-md-2 col-sm-2 col-xs-2">
						<button class="btn btn-primary " data-ng-click="getOrderList()"><i class="fas fa-search"></i></button>
					</div>
				</div>
			</div>
		</div>
		<div class="row form-group">
			<div class="col-lg-12 table-responsive">
				<!--<table class="table table-striped table-bordered">
					<thead>
						<tr>
							<th>ลำดับ</th>
							<th>หมายเลขออเดอร์</th>
							<th>ราคาสินค้ารวม (หยวน)</th>
							<th>ราคาค่าขนส่งรวม (บาท)</th>
							<th>วันที่ทำการสั่งซื้อ</th>
							<th>บริษัทขนส่งไทย</th>
							<th>หมายเลข Track (ขนส่งไทย)</th>
							<th>สถานะ</th>
							<th></th>
						</tr>
					</thead>
					<tr data-ng-repeat="data in DataList">
						<td>{{$index + 1}}</td>
						<td>{{data.order_no}}</td>
						<td>{{data.net_price | number:2}}</td>
						<td>{{data.order_desc.total_china_transport_cost + data.order_desc.transport_company_cost | number:2}}</td>
						<td>{{getThaiDateTimeFromString(data.created_at)}}</td>
						<td>
							<select class="form-control" data-ng-model="data.transport_company" data-ng-options="data.id as data.value for data in TRANSPORT_COMPANY" data-ng-blur="updateTransportCompany(data)">
								<option value="">กรุณาเลือก..</option>
							</select>
							<input class="form-control" type="text" data-ng-model="data.transport_company_other" data-ng-show="data.transport_company == 'other'" data-ng-blur="updateTransportCompany(data)">
						</td>
						<td>{{data.tracking_no_thai}}</td>
						<td>{{getOrderStatus(data.order_status)}}</td>
						<td>
							<a href="tracking/order/detail/{{data.id}}" class="btn btn-warning btn-block">รายละเอียดการสั่ง</a>
							<a href="pay/1/{{data.id}}" class="btn btn-primary btn-block" data-ng-show="data.order_status == 1">ชำระเงินค่าสินค้า</a>
							<a href="pay/2/{{data.id}}" class="btn btn-default btn-block" data-ng-show="data.order_status == 6">ชำระเงินค่าขนส่ง</a>
						</td>
					</tr>
				</table>-->

				<table class="table table-striped table-bordered">
					<tr data-ng-repeat="data in DataList">
						<td>
							<b>รหัสสั่งซื้อ</b> : <span class="label label-info">{{data.order_no}}</span><br>
							<b>วันที่สั่งซื้อ</b> : {{getThaiDateTimeFromString(data.created_at)}}<br>
							<b>ประเภทการขนส่ง</b> :  
							<span data-ng-show="data.transport_type == 'sea'" class="label label-primary">ทางเรือ</span>
							<span data-ng-show="data.transport_type == 'car'" class="label label-info">ทางรถ</span>
						</td>
						<td>
							<b>จำนวนสั่งซื้อ</b> : {{ getTotalUnitAmount(data) }}<br>
							<b>ราคาสินค้ารวม</b> : <span class="label label-danger">{{ calcSum(data) | number:2 }}</span><br>
							<!-- <b>ราคาสินค้ารวม</b> : {{ calcSum(data) | number:2 }}<br> -->

						</td>
						<td>
							<b>หมายเลขแทรค (ไทย)</b> : {{data.tracking_no_thai}}<br>
							<b>สถานะ</b> : <span class="label label-warning" data-ng-show="data.order_status !== 7">{{getOrderStatus(data.order_status)}}</span>
							<span class="label label-success" data-ng-show="data.order_status == 7">{{getOrderStatus(data.order_status)}}</span><br>
							<b>อัตราแลกเปลี่ยน</b> : {{ data.order_desc.china_ex_rate | number:2 }}<br>
						</td>
						<td>
							<b>บริษัทขนส่งในไทย</b> : 
							<select class="form-control" data-ng-model="data.transport_company" data-ng-options="data.id as data.value for data in TRANSPORT_COMPANY" data-ng-blur="updateTransportCompany(data)">
								<option value="">กรุณาเลือก..</option>
							</select>
							<input class="form-control" type="text" data-ng-model="data.transport_company_other" data-ng-show="data.transport_company == 'other'" data-ng-blur="updateTransportCompany(data)">
							<b>ค่าขนส่ง</b> : <span class="label label-danger">{{data.order_desc.total_china_transport_cost + data.order_desc.transport_company_cost}}</span>
						</td>
						<td class="text-center">
							<a href="{{data.order_details[0].product_original_url}}" target="_blank"><img src="{{data.order_details[0].product_thumbail_path}}" style="height: 100px;"></a>
						</td>
						<td>
							<a href="tracking/order/detail/{{data.id}}" class="btn btn-warning btn-block">รายละเอียดการสั่ง</a>
							<a href="pay/1/{{data.id}}" class="btn btn-primary btn-block" data-ng-show="data.order_status == 1">ชำระเงินค่าสินค้า</a>
							<a href="pay/2/{{data.id}}" class="btn btn-default btn-block" data-ng-show="data.order_status == 6">ชำระเงินค่าขนส่ง</a>
						</td>
					</tr>
				</table>
			</div>
		</div>
	</div>
	<div class="col-md-10 col-md-offset-1" ng-show="DataList == undefined || DataList == null" style="padding-bottom:300px;">
		&nbsp;
	</div>
</div>

<div data-ng-include src="'views/footer.html'"></div>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-161508645-1');
</script>